(function(){app.controller("artistDetailController",["$scope","$location","$stateParams","ngDialog","artistService","agencyService",function(n,t,i,r,u,f){var e,c,l,s,h,o;n.profile={};n.agency={};n.isLoaded=!1;n.videoIndex=0;n.audioIndex=0;n.videoSrc="";o=null;e=null;h=null;s=null;n.init=function(){u.queryDetail(i.artistId).then(function(i){n.profile=i.Result;f.get(n.profile.AgencyID).then(function(t){n.agency=t.Result});n.isLoaded=!0;n.initCarousel();t.url().lastIndexOf("#audio")>0?n.showAudios():t.url().lastIndexOf("#video")>0&&n.showVideos()})};n.findStats=function(t){return _.findWhere(n.profile.Statistics,{Code:t})};n.playVideo=function(t){n.videoIndex===t?o.paused()?o.play():o.pause():l(t)};n.playAudio=function(t){n.audioIndex===t?e.paused()?e.play():e.pause():c(t)};n.showVideos=function(){$("#modalVideoShowreel ").modal();l(0);$("#modalVideoShowreel").on("hide.bs.modal",function(){o.pause()})};n.showAudios=function(){$("#modalAudioShowreel ").modal();c(0);$("#modalAudioShowreel").on("hide.bs.modal",function(){e.pause()})};n.showCreditResumeMedia=function(n,t){if(n==="V"){h===null&&(h=videojs("creditVideo",{controls:!0,preload:"auto"}));h.src({type:"video/mp4",src:t});h.play();$("#modalResumeVideo").modal();$("#modalResumeVideo").on("hide.bs.modal",function(){h.pause()})}else if(n==="A"){s===null&&(s=videojs("creditAudio",{controls:!0,preload:"auto"}));s.src({type:"audio/mp3",src:t});s.play();$("#modalResumeAudio").modal();$("#modalResumeAudio").on("hide.bs.modal",function(){s.pause()})}else blueimp.Gallery([t])};l=function(t){if(n.videoIndex=t,o===null){o=videojs("videoShowreel",{controls:!0,preload:"auto"});o.on("ended",function(){n.videoIndex+1<n.profile.VideoList.length&&l(n.videoIndex+1);n.$apply()})}o.src({type:"video/mp4",src:n.profile.VideoList[t].VideoPath});o.play()};c=function(t){if(n.audioIndex=t,e===null){e=videojs("audioShowreel",{controls:!0,preload:"auto"});e.on("ended",function(){n.audioIndex+1<n.profile.AudioList.length&&c(n.audioIndex+1);n.$apply()})}e.src({type:"audio/mp3",src:n.profile.AudioList[t].AudioPath});e.play()};n.showCompCard=function(){return r.open({template:"/static/partial/_compcard_1.html",className:"ngdialog-theme-default dialog-compcard",scope:n})};n.initCarousel=function(){$(".carousel").carousel();$(".carousel .carousel-large").click(function(){var n;return n=$("#blueimp-gallery").data(),n.index=$(".carousel .carousel-indicators li.active").data("slide-to"),blueimp.Gallery($(".carousel-indicators a"),n)});$(".carousel").on("slide.bs.carousel",function(n){var u,r,i,t,f;return i=$(".carousel-indicators"),f=parseInt($(".carousel").width()),t=parseInt(i.css("left")),r=$(".carousel .carousel-indicators li.active").data("slide-to"),u=$(".carousel .carousel-indicators li:last").data("slide-to"),n.direction==="left"?r===u&&t<0?i.animate({left:0}):(r+2)*52>f&&i.animate({left:t-50}):r===0&&t>=0?i.animate({left:(u-Math.floor(f/52))*-70}):t<0&&(t=t+50,t>0&&(t=0),i.animate({left:t})),""});return""}}])}).call(this);
//# sourceMappingURL=artistDetailController.min.js.map
